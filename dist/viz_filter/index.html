<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/ >
		<title>Smoothed D3.js Radar Chart</title>

		<!-- Google fonts -->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

		<!-- D3.js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
		
		<style>
			body {
				font-family: 'Open Sans', sans-serif;
				font-size: 30px;
				font-weight: 500;
				fill: #242424;
				text-align: center;
				text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff, 0 -1px 0 #fff;
				cursor: default;
			}
			
			.legend {
				font-family: 'Raleway', sans-serif;
				fill: #333333;
			}
			
			.tooltip {
				fill: #333333;
			}
		</style>
	
	</head>
	<body>

		<div class="radarChart"></div>

		<div id="app">
			<input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
			<label for="jack">南</label>
			<input type="checkbox" id="john" value="John" v-model="checkedNames">
			<label for="john">John</label>
			<input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
			<label for="mike">Mike</label>
			<br>
			<input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
			<label for="jack">南</label>
			<input type="checkbox" id="john" value="John" v-model="checkedNames">
			<label for="john">John</label>
			<input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
			<label for="mike">Mike</label>
			<br>
			<span>Checked names: {{ checkedNames }}</span>
		</div>

		<script src="radarchart.js"></script>	
		<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
		<script>

			var vm = new Vue({
				el: '#app',
				data: {
					checkedNames: []
				}
			})
			// 要先修好api,照著圖片,最後做好filter按鈕,發出對應的request
			// var payload = {
			// 		"gender":parseInt(answerArray[1]),
			// 		"age":parseInt(answerArray[2]),
			// 		"arrival_2":answerArray[3],
			// 		"ecode_type": answerArray[0]
			// }
			// var data = JSON.stringify(payload);
			// console.log(data);
      
      /* Radar chart design created by Nadieh Bremer - VisualCinnamon.com */
      
			////////////////////////////////////////////////////////////// 
			//////////////////////// Set-Up ////////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var margin = {top: 100, right: 100, bottom: 100, left: 100},
				width = Math.min(700, window.innerWidth - 10) - margin.left - margin.right,
				height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);


			////////////////////////////////////////////////////////////// 
			/////////////////////// API Setting ////////////////////////// 
			////////////////////////////////////////////////////////////// 


			const api_server_location = "http://localhost:5000/api";
			
			function processStatus(response) {
					// 狀態 "0" 是處理本地檔案 (例如Cordova/Phonegap等等)
					if (response.status === 200 || response.status === 0) {
							return Promise.resolve(response)
					} else {
							return Promise.reject(new Error(response.statusText))
					}
			}

			const getCalDataFromAPI = ()=>{
					return new Promise((resolve,reject)=>{
							fetch(api_server_location+"/models/cal",{
									headers: {
											'Accept': 'application/json',
											'Content-Type': 'application/json'
									},
									method: "POST",
									body: data
							})
									.then(processStatus)
									.then(function (response) {
											response.json()
													.then((data)=>{
															resolve(data);
													}).catch((err)=>{
															reject(err)
													});
									})
									.catch(function (err) {
											reject(err)
									});
					});
			}

			////////////////////////////////////////////////////////////// 
			////////////////////////// Data ////////////////////////////// 
			////////////////////////////////////////////////////////////// 


			var data = [
					  [
						{axis:"到院前死亡(OHCA)率",value:0.01},
						{axis:"ISS>= 16 率",value:0.2},

						{axis:"死亡率",value:0.1},
								
					  ]
					];

			
			// getCalDataFromAPI()
			// 	.then(function (apidata) {
			// 			console.log("cal");
			// 			console.log(apidata);
					

    	// 	})
			// 	.catch(function (err) {
			// 			console.log('GetDataWrong', err);
			// 			// reject(err)
			// 	});


			////////////////////////////////////////////////////////////// 
			//////////////////// Draw the Chart ////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var color = d3.scale.ordinal()
				.range(["#EDC951","#CC333F","#00A0B0"]);


			var radarChartOptions = {
			  w: width,
			  h: height,
			  margin: margin,
			  maxValue: 0.5,
			  levels: 5,
			  roundStrokes: true,
			  color: color
			};
			//Call function to draw the Radar chart
			RadarChart(".radarChart", data, radarChartOptions);



		</script>
	</body>
</html>